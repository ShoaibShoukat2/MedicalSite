<!DOCTYPE html>
{% load user_info_tags %}
{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'assets/img/favicon.ico' %}">
    <title>{% block title %}Practitioner Dashboard{% endblock %}</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'doctor-blue': '#1e40af',
                        'doctor-light-blue': '#dbeafe',
                        'doctor-dark-blue': '#1e3a8a',
                        'doctor-green': '#059669',
                        'doctor-light-green': '#d1fae5',
                        'doctor-teal': '#0d9488',
                        'doctor-gray': '#f8fafc',
                        'doctor-dark-gray': '#64748b',
                        'doctor-red': '#dc2626',
                        'doctor-orange': '#ea580c',
                        'doctor-purple': '#7c3aed',
                        'doctor-pink': '#ec4899',
                        'doctor-indigo': '#4f46e5'
                    },
                    fontFamily: {
                        'doctor': ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'slide-in': 'slideIn 0.3s ease-out',
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'bounce-gentle': 'bounceGentle 2s infinite',
                    }
                }
            }
        }
    </script>

    {% block extra_css %}{% endblock %}
    
    <style>
        /* Modern Practitioner Dashboard Styles */
        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #dbeafe 100%);
        }
        
        /* Sidebar Animations */
        .sidebar-enter {
            transform: translateX(-100%);
        }
        
        .sidebar-enter-active {
            transform: translateX(0);
            transition: transform 0.3s ease-out;
        }
        
        .sidebar-exit {
            transform: translateX(0);
        }
        
        .sidebar-exit-active {
            transform: translateX(-100%);
            transition: transform 0.3s ease-out;
        }
        
        /* Card Hover Effects */
        .doctor-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .doctor-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(30, 64, 175, 0.15);
        }
        
        /* Medical Pulse Animation */
        .medical-pulse {
            animation: medicalPulse 2s infinite;
        }
        
        @keyframes medicalPulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(30, 64, 175, 0.4);
            }
            50% {
                box-shadow: 0 0 0 15px rgba(30, 64, 175, 0);
            }
        }
        
        /* Notification Badge */
        .notification-badge {
            animation: notificationBounce 2s infinite;
        }
        
        @keyframes notificationBounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-3px);
            }
            60% {
                transform: translateY(-1px);
            }
        }
        
        /* Alert Bell Specific Styles */
        .alert-bell-active {
            animation: bellRing 0.5s ease-in-out;
        }
        
        @keyframes bellRing {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(15deg); }
            75% { transform: rotate(-15deg); }
        }
        
        /* Pending Appointments Dropdown */
        .pending-appointment-item:hover {
            background: linear-gradient(135deg, #f8fafc 0%, #dbeafe 100%);
        }
        
        .quick-action-btn {
            transition: all 0.2s ease;
        }
        
        .quick-action-btn:hover {
            transform: scale(1.1);
        }
        
        /* Notification Panel Animations */
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Smooth Transitions */
        .smooth-transition {
            transition: all 0.3s ease;
        }
        
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #1e40af;
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #1e3a8a;
        }
        
        /* Responsive Design Improvements */
        @media (max-width: 768px) {
            .sidebar-mobile-hidden {
                display: none;
            }
            
            /* Adjust header padding on mobile */
            header {
                padding: 0.75rem 1rem !important;
            }
            
            /* Make main content responsive */
            main {
                padding: 1rem !important;
            }
            
            /* Responsive cards */
            .doctor-card {
                margin-bottom: 1rem;
            }
            
            /* Mobile-friendly buttons */
            .mobile-btn {
                padding: 0.5rem;
                min-width: 44px;
                min-height: 44px;
            }
        }
        
        @media (max-width: 640px) {
            /* Extra small screens */
            .text-responsive {
                font-size: 0.875rem;
            }
            
            /* Hide less important elements on very small screens */
            .sm-hidden {
                display: none;
            }
        }
        
        /* Language Dropdown Specific Styles */
        #practitionerLangDropdown {
            z-index: 9999 !important;
            position: absolute !important;
        }
        
        #practitionerLangDropdown[style*="display: none"] {
            display: none !important;
        }
        
        #practitionerLangDropdown[style*="display: block"] {
            display: block !important;
        }
        
        /* Ensure language selector container has proper positioning */
        .language-selector-container {
            position: relative;
            z-index: 1000;
        }
        
        /* Language selector button improvements */
        #practitionerLanguageBtn {
            position: relative;
            z-index: 1001;
            cursor: pointer;
        }
        
        /* Language dropdown improvements */
        .practitioner-lang-option {
            cursor: pointer;
            user-select: none;
        }
        
        .practitioner-lang-option:hover {
            background-color: #dbeafe !important;
        }
        
        /* Notification styles */
        .practitioner-lang-notification {
            z-index: 10000 !important;
        }
        
        /* RTL Support for Language System */
        [dir="rtl"] {
            text-align: right;
        }
        
        [dir="rtl"] .flex {
            flex-direction: row-reverse;
        }
        
        [dir="rtl"] .space-x-3 > * + * {
            margin-left: 0;
            margin-right: 0.75rem;
        }
        
        [dir="rtl"] .space-x-4 > * + * {
            margin-left: 0;
            margin-right: 1rem;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-doctor-gray to-doctor-light-blue min-h-screen font-doctor">
    <!-- Modern Practitioner Dashboard Layout -->
    <div class="flex h-screen overflow-hidden">
        
        <!-- Modern Sidebar -->
        <div id="sidebar" class="w-64 bg-gradient-to-b from-doctor-blue to-doctor-dark-blue shadow-2xl transform transition-transform duration-300 ease-in-out lg:translate-x-0 -translate-x-full fixed lg:relative z-40 h-full flex flex-col">
            <!-- Sidebar Header -->
            <div class="p-6 border-b border-white/10 flex-shrink-0">
                <div class="flex items-center space-x-3">
                    <img src="{% static 'MedicalSiteLogo.svg' %}" alt="Medical Platform" class="h-10 w-10">
                    <div>
                        <h2 class="text-white font-bold text-lg">Doctor Portal</h2>
                        <p class="text-white/70 text-sm">Healthcare Dashboard</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 mt-6 px-4 space-y-2 custom-scrollbar overflow-y-auto">
                <div class="pb-20">
                <a href="{% url 'practitionerdashboard:dashboard' %}" class="flex items-center space-x-3 px-4 py-3 text-white/90 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-200 {% if request.resolver_match.url_name == 'dashboard' %}bg-white/20 text-white{% endif %}">
                    <i class="fas fa-tachometer-alt text-lg"></i>
                    <span class="font-medium" data-translate="Dashboard">Dashboard</span>
                </a>
                
                <a href="{% url 'practitioner_dashboard:practitioner_profile' %}" class="flex items-center space-x-3 px-4 py-3 text-white/90 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-200 {% if request.resolver_match.url_name == 'practitioner_profile' %}bg-white/20 text-white{% endif %}">
                    <i class="fas fa-user-md text-lg"></i>
                    <span class="font-medium" data-translate="Profile">Profile</span>
                </a>
                
                <a href="{% url 'practitionerdashboard:mypatient' %}" class="flex items-center space-x-3 px-4 py-3 text-white/90 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-200 {% if request.resolver_match.url_name == 'mypatient' %}bg-white/20 text-white{% endif %}">
                    <i class="fas fa-users text-lg"></i>
                    <span class="font-medium" data-translate="My Patients">My Patients</span>
                </a>
                
                <a href="{% url 'practitionerdashboard:schedule_timming' %}" class="flex items-center space-x-3 px-4 py-3 text-white/90 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-200 {% if request.resolver_match.url_name == 'schedule_timming' %}bg-white/20 text-white{% endif %}">
                    <i class="fas fa-clock text-lg"></i>
                    <span class="font-medium" data-translate="Schedule">Schedule Timings</span>
                </a>
                
                <a href="{% url 'practitioner_dashboard:accepted_appointments' %}" class="flex items-center space-x-3 px-4 py-3 text-white/90 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-200 {% if request.resolver_match.url_name == 'accepted_appointments' %}bg-white/20 text-white{% endif %}">
                    <i class="fas fa-calendar-check text-lg"></i>
                    <span class="font-medium" data-translate="Appointments">Appointments</span>
                </a>
                
                <a href="{% url 'practitionerdashboard:cancellation_completion' %}" class="flex items-center space-x-3 px-4 py-3 text-white/90 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-200 {% if request.resolver_match.url_name == 'cancellation_completion' %}bg-white/20 text-white{% endif %}">
                    <i class="fas fa-times-circle text-lg"></i>
                    <span class="font-medium" data-translate="Cancellation & Completion">Cancellation & Completion</span>
                </a>
                
                <a href="{% url 'practitionerdashboard:reviews' %}" class="flex items-center space-x-3 px-4 py-3 text-white/90 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-200 {% if request.resolver_match.url_name == 'reviews' %}bg-white/20 text-white{% endif %}">
                    <i class="fas fa-star text-lg"></i>
                    <span class="font-medium" data-translate="Reviews">Reviews</span>
                    <span class="ml-auto bg-doctor-green text-white text-xs px-2 py-1 rounded-full notification-badge">
                        {% review_count_from_session request %}
                    </span>
                </a>
                
                <a href="{% url 'chat:chat_list' %}" class="flex items-center space-x-3 px-4 py-3 text-white/90 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-200 {% if request.resolver_match.url_name == 'chat_list' %}bg-white/20 text-white{% endif %}">
                    <i class="fas fa-comments text-lg"></i>
                    <span class="font-medium" data-translate="Patient Messages">Patient Messages</span>
                    {% if unread_messages_count > 0 %}
                    <span class="ml-auto bg-doctor-red text-white text-xs px-2 py-1 rounded-full notification-badge">{{ unread_messages_count }}</span>
                    {% endif %}
                </a>
                </div>
            </nav>
        </div>

        <!-- Main Content Area -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Modern Header -->
            <header class="bg-white/80 backdrop-blur-lg shadow-sm border-b border-gray-200/50 px-4 lg:px-6 py-4">
                <div class="flex items-center justify-between">
                    <!-- Mobile Menu Button -->
                    <button onclick="toggleSidebar()" class="lg:hidden p-2 rounded-lg text-doctor-blue hover:bg-doctor-light-blue transition-colors">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    
                    <!-- Search Bar -->
                    <div class="flex-1 max-w-2xl mx-2 sm:mx-4 hidden sm:block">
                        <div class="relative">
                            <input type="text" 
                                   class="w-full px-4 py-2 pl-10 pr-4 bg-white/70 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-doctor-blue/50 focus:border-doctor-blue transition-all duration-200" 
                                   placeholder="Search patients, appointments..." 
                                   data-translate="Search">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        </div>
                    </div>
                    
                    <!-- User Profile -->
                    <div class="flex items-center space-x-2 sm:space-x-4">
                        <!-- Language Selector -->
                        <div class="relative language-selector-container">
                            <button id="practitionerLanguageBtn" class="flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 bg-doctor-light-blue hover:bg-doctor-blue/10 rounded-xl transition-all duration-300 text-doctor-blue border border-doctor-blue/20">
                                <i class="fas fa-globe text-sm"></i>
                                <span id="practitionerCurrentLang" class="text-sm font-medium hidden md:inline">English</span>
                                <i class="fas fa-chevron-down text-xs transition-transform duration-200" id="practitionerLangChevron"></i>
                            </button>
                            
                            <!-- Language Dropdown -->
                            <div id="practitionerLangDropdown" class="absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-2xl border border-gray-200 py-2 z-[9999]" style="display: none;">
                                <div class="px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide border-b border-gray-100">Select Language</div>
                                <button class="practitioner-lang-option w-full text-left px-4 py-3 hover:bg-doctor-light-blue text-gray-700 hover:text-doctor-dark-blue transition-colors duration-200 flex items-center space-x-3" data-lang="en" data-name="English">
                                    <span class="w-6 h-4 bg-gradient-to-r from-blue-500 to-red-500 rounded-sm flex items-center justify-center text-white text-xs font-bold">EN</span>
                                    <span>English</span>
                                </button>
                                <button class="practitioner-lang-option w-full text-left px-4 py-3 hover:bg-doctor-light-blue text-gray-700 hover:text-doctor-dark-blue transition-colors duration-200 flex items-center space-x-3" data-lang="ur" data-name="Ø§Ø±Ø¯Ùˆ">
                                    <span class="w-6 h-4 bg-gradient-to-r from-green-500 to-green-600 rounded-sm flex items-center justify-center text-white text-xs font-bold">UR</span>
                                    <span>Ø§Ø±Ø¯Ùˆ</span>
                                </button>
                                <button class="practitioner-lang-option w-full text-left px-4 py-3 hover:bg-doctor-light-blue text-gray-700 hover:text-doctor-dark-blue transition-colors duration-200 flex items-center space-x-3" data-lang="ar" data-name="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">
                                    <span class="w-6 h-4 bg-gradient-to-r from-green-600 to-green-700 rounded-sm flex items-center justify-center text-white text-xs font-bold">AR</span>
                                    <span>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                                </button>
                                <button class="practitioner-lang-option w-full text-left px-4 py-3 hover:bg-doctor-light-blue text-gray-700 hover:text-doctor-dark-blue transition-colors duration-200 flex items-center space-x-3" data-lang="hi" data-name="à¤¹à¤¿à¤‚à¤¦à¥€">
                                    <span class="w-6 h-4 bg-gradient-to-r from-orange-500 to-orange-600 rounded-sm flex items-center justify-center text-white text-xs font-bold">HI</span>
                                    <span>à¤¹à¤¿à¤‚à¤¦à¥€</span>
                                </button>
                                <button class="practitioner-lang-option w-full text-left px-4 py-3 hover:bg-doctor-light-blue text-gray-700 hover:text-doctor-dark-blue transition-colors duration-200 flex items-center space-x-3" data-lang="es" data-name="EspaÃ±ol">
                                    <span class="w-6 h-4 bg-gradient-to-r from-red-500 to-yellow-500 rounded-sm flex items-center justify-center text-white text-xs font-bold">ES</span>
                                    <span>EspaÃ±ol</span>
                                </button>
                                <button class="practitioner-lang-option w-full text-left px-4 py-3 hover:bg-doctor-light-blue text-gray-700 hover:text-doctor-dark-blue transition-colors duration-200 flex items-center space-x-3" data-lang="fr" data-name="FranÃ§ais">
                                    <span class="w-6 h-4 bg-gradient-to-r from-blue-600 to-red-600 rounded-sm flex items-center justify-center text-white text-xs font-bold">FR</span>
                                    <span>FranÃ§ais</span>
                                </button>
                                <button class="practitioner-lang-option w-full text-left px-4 py-3 hover:bg-doctor-light-blue text-gray-700 hover:text-doctor-dark-blue transition-colors duration-200 flex items-center space-x-3" data-lang="de" data-name="Deutsch">
                                    <span class="w-6 h-4 bg-gradient-to-r from-black to-red-600 rounded-sm flex items-center justify-center text-white text-xs font-bold">DE</span>
                                    <span>Deutsch</span>
                                </button>
                                <button class="practitioner-lang-option w-full text-left px-4 py-3 hover:bg-doctor-light-blue text-gray-700 hover:text-doctor-dark-blue transition-colors duration-200 flex items-center space-x-3" data-lang="zh" data-name="ä¸­æ–‡">
                                    <span class="w-6 h-4 bg-gradient-to-r from-red-600 to-yellow-500 rounded-sm flex items-center justify-center text-white text-xs font-bold">ZH</span>
                                    <span>ä¸­æ–‡</span>
                                </button>
                            </div>
                        </div>

                        <!-- Alert Bell for Pending Appointments -->
                        <div class="relative hidden sm:block">
                            <button id="alertBell" onclick="togglePendingAppointments()" class="p-2 text-doctor-blue hover:bg-doctor-light-blue rounded-lg transition-colors relative">
                                <i class="fas fa-bell text-lg"></i>
                                <span id="pendingCount" class="absolute -top-1 -right-1 bg-doctor-red text-white text-xs w-5 h-5 rounded-full flex items-center justify-center notification-badge">0</span>
                            </button>
                            
                            <!-- Pending Appointments Dropdown -->
                            <div id="pendingDropdown" class="absolute right-0 top-full mt-2 w-80 bg-white rounded-xl shadow-2xl border border-gray-200 z-[9999] hidden animate-fade-in">
                                <div class="p-4 border-b border-gray-100">
                                    <h3 class="text-lg font-semibold text-doctor-dark-blue flex items-center">
                                        <i class="fas fa-hourglass-half text-doctor-orange mr-2"></i>
                                        Pending Appointments
                                    </h3>
                                </div>
                                <div id="pendingAppointmentsList" class="max-h-96 overflow-y-auto custom-scrollbar">
                                    <!-- Pending appointments will be loaded here -->
                                </div>
                                <div class="p-3 border-t border-gray-100 text-center">
                                    <a href="{% url 'practitionerdashboard:dashboard' %}" class="text-doctor-blue hover:text-doctor-dark-blue text-sm font-medium">
                                        View All Appointments
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Chat -->
                        <!-- <a href="{% url 'chat:chat_list' %}" class="p-2 text-doctor-blue hover:bg-doctor-light-blue rounded-lg transition-colors relative hidden sm:block">
                            <i class="fas fa-comments text-lg"></i>
                            <span class="absolute -top-1 -right-1 bg-doctor-green text-white text-xs w-5 h-5 rounded-full flex items-center justify-center notification-badge">5</span>
                        </a> -->
                        
                        <!-- Profile -->
                        <div class="flex items-center space-x-2 sm:space-x-3">
                            <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-doctor-blue to-doctor-purple rounded-full flex items-center justify-center">
                                <img src="{% get_practitioner_image request %}" 
                                     alt="Profile Picture" 
                                     class="w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover border-2 border-white shadow-sm">
                            </div>
                            <div class="hidden lg:block">
                                <p class="text-sm font-medium text-doctor-dark-blue">
                                    {% if request.session.practitioner_name %}
                                        Dr. {{ request.session.practitioner_name }}
                                    {% elif request.user.is_authenticated %}
                                        Dr. {{ request.user.name|default:request.user.email }}
                                    {% else %}
                                        Doctor
                                    {% endif %}
                                </p>
                                <p class="text-xs text-doctor-dark-gray">Medical Professional</p>
                            </div>
                        </div>
                        
                        <a href="{% url 'frontend:logout' %}" class="px-2 sm:px-4 py-2 bg-doctor-red text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium" data-translate="Logout">
                            <i class="fas fa-sign-out-alt sm:mr-2"></i><span class="hidden sm:inline">Logout</span>
                        </a>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <main class="flex-1 overflow-y-auto p-4 lg:p-6 custom-scrollbar">
                {% block content %}
                <!-- Page content will be inserted here -->
                {% endblock content %}
            </main>
        </div>
    </div>

    <!-- Mobile Sidebar Overlay -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-30 lg:hidden hidden" onclick="toggleSidebar()"></div>
<script>
// ===== PRACTITIONER LANGUAGE SYSTEM - SIMPLIFIED =====
console.log('ğŸ¥ Loading Practitioner Language System...');

// Language translations object
const practitionerTranslations = {
    'en': {
        'Dashboard': 'Dashboard',
        'Profile': 'Profile',
        'My Patients': 'My Patients',
        'Schedule': 'Schedule Timings',
        'Appointments': 'Appointments',
        'Cancellation & Completion': 'Cancellation & Completion',
        'Reviews': 'Reviews',
        'Patient Messages': 'Patient Messages',
        'Earnings': 'Earnings',
        'Settings': 'Settings',
        'Logout': 'Logout',
        'Search': 'Search patients, appointments...',
        'Consultations': 'Consultations',
        'Medical Records': 'Medical Records',
        'Dashboard Overview': 'Dashboard Overview',
        'Accepted Appointments': 'Accepted Appointments',
        'Appointment History': 'Appointment History',
        'Practitioner Profile': 'Practitioner Profile',
        'Patient Reviews': 'Patient Reviews',
        'Total Patients': 'Total Patients',
        'Registered patients': 'Registered patients',
        'Messages': 'Messages',
        'Unread messages': 'Unread messages',
        'Respond': 'Respond',
        'Accepted': 'Accepted',
        'Confirmed appointments': 'Confirmed appointments',
        'Pending': 'Pending',
        'Awaiting response': 'Awaiting response',
        'Today': 'Today',
        'Today\'s schedule': 'Today\'s schedule',
        'Manage your professional information': 'Manage your professional information',
        'per session': 'per session',
        'Edit Profile': 'Edit Profile'
    },
    'ur': {
        'Dashboard': 'ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ',
        'Profile': 'Ù¾Ø±ÙˆÙØ§Ø¦Ù„',
        'My Patients': 'Ù…ÛŒØ±Û’ Ù…Ø±ÛŒØ¶',
        'Schedule': 'Ø´ÛŒÚˆÙˆÙ„ Ù¹Ø§Ø¦Ù…Ù†Ú¯Ø²',
        'Appointments': 'Ø§Ù¾Ø§Ø¦Ù†Ù¹Ù…Ù†Ù¹Ø³',
        'Cancellation & Completion': 'Ù…Ù†Ø³ÙˆØ®ÛŒ Ø§ÙˆØ± ØªÚ©Ù…ÛŒÙ„',
        'Reviews': 'Ø¬Ø§Ø¦Ø²Û’',
        'Patient Messages': 'Ù…Ø±ÛŒØ¶ÙˆÚº Ú©Û’ Ù¾ÛŒØºØ§Ù…Ø§Øª',
        'Earnings': 'Ø¢Ù…Ø¯Ù†ÛŒ',
        'Settings': 'Ø³ÛŒÙ¹Ù†Ú¯Ø²',
        'Logout': 'Ù„Ø§Ú¯ Ø¢Ø¤Ù¹',
        'Search': 'Ù…Ø±ÛŒØ¶ØŒ Ø§Ù¾Ø§Ø¦Ù†Ù¹Ù…Ù†Ù¹Ø³ ØªÙ„Ø§Ø´ Ú©Ø±ÛŒÚº...',
        'Consultations': 'Ù…Ø´Ø§ÙˆØ±Øª',
        'Medical Records': 'Ø·Ø¨ÛŒ Ø±ÛŒÚ©Ø§Ø±ÚˆØ²',
        'Dashboard Overview': 'ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ Ú©Ø§ Ø¬Ø§Ø¦Ø²Û',
        'Accepted Appointments': 'Ù…Ù†Ø¸ÙˆØ± Ø´Ø¯Û Ø§Ù¾Ø§Ø¦Ù†Ù¹Ù…Ù†Ù¹Ø³',
        'Appointment History': 'Ø§Ù¾Ø§Ø¦Ù†Ù¹Ù…Ù†Ù¹ Ú©ÛŒ ØªØ§Ø±ÛŒØ®',
        'Practitioner Profile': 'ÚˆØ§Ú©Ù¹Ø± Ú©Ø§ Ù¾Ø±ÙˆÙØ§Ø¦Ù„',
        'Patient Reviews': 'Ù…Ø±ÛŒØ¶ÙˆÚº Ú©Û’ Ø¬Ø§Ø¦Ø²Û’',
        'Total Patients': 'Ú©Ù„ Ù…Ø±ÛŒØ¶',
        'Registered patients': 'Ø±Ø¬Ø³Ù¹Ø±Úˆ Ù…Ø±ÛŒØ¶',
        'Messages': 'Ù¾ÛŒØºØ§Ù…Ø§Øª',
        'Unread messages': 'ØºÛŒØ± Ù¾Ú‘Ú¾Û’ Ú¯Ø¦Û’ Ù¾ÛŒØºØ§Ù…Ø§Øª',
        'Respond': 'Ø¬ÙˆØ§Ø¨ Ø¯ÛŒÚº',
        'Accepted': 'Ù…Ù†Ø¸ÙˆØ± Ø´Ø¯Û',
        'Confirmed appointments': 'ØªØµØ¯ÛŒÙ‚ Ø´Ø¯Û Ø§Ù¾Ø§Ø¦Ù†Ù¹Ù…Ù†Ù¹Ø³',
        'Pending': 'Ø²ÛŒØ± Ø§Ù„ØªÙˆØ§Ø¡',
        'Awaiting response': 'Ø¬ÙˆØ§Ø¨ Ú©Ø§ Ø§Ù†ØªØ¸Ø§Ø±',
        'Today': 'Ø¢Ø¬',
        'Today\'s schedule': 'Ø¢Ø¬ Ú©Ø§ Ø´ÛŒÚˆÙˆÙ„',
        'Manage your professional information': 'Ø§Ù¾Ù†ÛŒ Ù¾ÛŒØ´Û ÙˆØ±Ø§Ù†Û Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ú©Ø§ Ø§Ù†ØªØ¸Ø§Ù… Ú©Ø±ÛŒÚº',
        'per session': 'ÙÛŒ Ø³ÛŒØ´Ù†',
        'Edit Profile': 'Ù¾Ø±ÙˆÙØ§Ø¦Ù„ Ù…ÛŒÚº ØªØ¨Ø¯ÛŒÙ„ÛŒ'
    },
    'ar': {
        'Dashboard': 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
        'Profile': 'Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ',
        'My Patients': 'Ù…Ø±Ø¶Ø§ÙŠ',
        'Schedule': 'Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„',
        'Appointments': 'Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯',
        'Cancellation & Completion': 'Ø§Ù„Ø¥Ù„ØºØ§Ø¡ ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²',
        'Reviews': 'Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª',
        'Patient Messages': 'Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø¶Ù‰',
        'Earnings': 'Ø§Ù„Ø£Ø±Ø¨Ø§Ø­',
        'Settings': 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',
        'Logout': 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',
        'Search': 'Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙˆØ§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯...',
        'Consultations': 'Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª',
        'Medical Records': 'Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©',
        'Dashboard Overview': 'Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
        'Accepted Appointments': 'Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©',
        'Appointment History': 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯',
        'Practitioner Profile': 'Ù…Ù„Ù Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø§Ù„Ø´Ø®ØµÙŠ',
        'Patient Reviews': 'Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ø§Ù„Ù…Ø±Ø¶Ù‰',
        'Total Patients': 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø±Ø¶Ù‰',
        'Registered patients': 'Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ù…Ø³Ø¬Ù„ÙˆÙ†',
        'Messages': 'Ø§Ù„Ø±Ø³Ø§Ø¦Ù„',
        'Unread messages': 'Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©',
        'Respond': 'Ø§Ù„Ø±Ø¯',
        'Accepted': 'Ù…Ù‚Ø¨ÙˆÙ„',
        'Confirmed appointments': 'Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø¤ÙƒØ¯Ø©',
        'Pending': 'ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±',
        'Awaiting response': 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯',
        'Today': 'Ø§Ù„ÙŠÙˆÙ…',
        'Today\'s schedule': 'Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…',
        'Manage your professional information': 'Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©',
        'per session': 'Ù„ÙƒÙ„ Ø¬Ù„Ø³Ø©',
        'Edit Profile': 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ'
    },
    'hi': {
        'Dashboard': 'à¤¡à¥ˆà¤¶à¤¬à¥‹à¤°à¥à¤¡',
        'Profile': 'à¤ªà¥à¤°à¥‹à¤«à¤¾à¤‡à¤²',
        'My Patients': 'à¤®à¥‡à¤°à¥‡ à¤®à¤°à¥€à¤œà¤¼',
        'Schedule': 'à¤¶à¥‡à¤¡à¥à¤¯à¥‚à¤² à¤¸à¤®à¤¯',
        'Appointments': 'à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿà¥à¤¸',
        'Cancellation & Completion': 'à¤°à¤¦à¥à¤¦à¥€à¤•à¤°à¤£ à¤”à¤° à¤ªà¥‚à¤°à¥à¤£à¤¤à¤¾',
        'Reviews': 'à¤¸à¤®à¥€à¤•à¥à¤·à¤¾à¤à¤‚',
        'Patient Messages': 'à¤®à¤°à¥€à¤œà¤¼à¥‹à¤‚ à¤•à¥‡ à¤¸à¤‚à¤¦à¥‡à¤¶',
        'Earnings': 'à¤†à¤¯',
        'Settings': 'à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤¸',
        'Logout': 'à¤²à¥‰à¤—à¤†à¤‰à¤Ÿ',
        'Search': 'à¤®à¤°à¥€à¤œà¤¼, à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿ à¤–à¥‹à¤œà¥‡à¤‚...',
        'Consultations': 'à¤ªà¤°à¤¾à¤®à¤°à¥à¤¶',
        'Medical Records': 'à¤šà¤¿à¤•à¤¿à¤¤à¥à¤¸à¤¾ à¤°à¤¿à¤•à¥‰à¤°à¥à¤¡',
        'Dashboard Overview': 'à¤¡à¥ˆà¤¶à¤¬à¥‹à¤°à¥à¤¡ à¤…à¤µà¤²à¥‹à¤•à¤¨',
        'Accepted Appointments': 'à¤¸à¥à¤µà¥€à¤•à¥ƒà¤¤ à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿà¥à¤¸',
        'Appointment History': 'à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿ à¤‡à¤¤à¤¿à¤¹à¤¾à¤¸',
        'Practitioner Profile': 'à¤šà¤¿à¤•à¤¿à¤¤à¥à¤¸à¤• à¤ªà¥à¤°à¥‹à¤«à¤¾à¤‡à¤²',
        'Patient Reviews': 'à¤®à¤°à¥€à¤œà¤¼à¥‹à¤‚ à¤•à¥€ à¤¸à¤®à¥€à¤•à¥à¤·à¤¾à¤à¤‚',
        'Total Patients': 'à¤•à¥à¤² à¤®à¤°à¥€à¤œà¤¼',
        'Registered patients': 'à¤ªà¤‚à¤œà¥€à¤•à¥ƒà¤¤ à¤®à¤°à¥€à¤œà¤¼',
        'Messages': 'à¤¸à¤‚à¤¦à¥‡à¤¶',
        'Unread messages': 'à¤…à¤ªà¤ à¤¿à¤¤ à¤¸à¤‚à¤¦à¥‡à¤¶',
        'Respond': 'à¤‰à¤¤à¥à¤¤à¤° à¤¦à¥‡à¤‚',
        'Accepted': 'à¤¸à¥à¤µà¥€à¤•à¥ƒà¤¤',
        'Confirmed appointments': 'à¤ªà¥à¤·à¥à¤Ÿ à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿà¥à¤¸',
        'Pending': 'à¤²à¤‚à¤¬à¤¿à¤¤',
        'Awaiting response': 'à¤‰à¤¤à¥à¤¤à¤° à¤•à¥€ à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾',
        'Today': 'à¤†à¤œ',
        'Today\'s schedule': 'à¤†à¤œ à¤•à¤¾ à¤•à¤¾à¤°à¥à¤¯à¤•à¥à¤°à¤®',
        'Manage your professional information': 'à¤…à¤ªà¤¨à¥€ à¤µà¥à¤¯à¤¾à¤µà¤¸à¤¾à¤¯à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¿à¤¤ à¤•à¤°à¥‡à¤‚',
        'per session': 'à¤ªà¥à¤°à¤¤à¤¿ à¤¸à¤¤à¥à¤°',
        'Edit Profile': 'à¤ªà¥à¤°à¥‹à¤«à¤¾à¤‡à¤² à¤¸à¤‚à¤ªà¤¾à¤¦à¤¿à¤¤ à¤•à¤°à¥‡à¤‚'
    },
    'es': {
        'Dashboard': 'Panel de Control',
        'Profile': 'Perfil',
        'My Patients': 'Mis Pacientes',
        'Schedule': 'Horarios',
        'Appointments': 'Citas',
        'Cancellation & Completion': 'CancelaciÃ³n y FinalizaciÃ³n',
        'Reviews': 'ReseÃ±as',
        'Patient Messages': 'Mensajes de Pacientes',
        'Earnings': 'Ganancias',
        'Settings': 'ConfiguraciÃ³n',
        'Logout': 'Cerrar SesiÃ³n',
        'Search': 'Buscar pacientes, citas...',
        'Consultations': 'Consultas',
        'Medical Records': 'Registros MÃ©dicos',
        'Dashboard Overview': 'Resumen del Panel',
        'Accepted Appointments': 'Citas Aceptadas',
        'Appointment History': 'Historial de Citas',
        'Practitioner Profile': 'Perfil del MÃ©dico',
        'Patient Reviews': 'ReseÃ±as de Pacientes',
        'Total Patients': 'Total de Pacientes',
        'Registered patients': 'Pacientes registrados',
        'Messages': 'Mensajes',
        'Unread messages': 'Mensajes no leÃ­dos',
        'Respond': 'Responder',
        'Accepted': 'Aceptado',
        'Confirmed appointments': 'Citas confirmadas',
        'Pending': 'Pendiente',
        'Awaiting response': 'Esperando respuesta',
        'Today': 'Hoy',
        'Today\'s schedule': 'Horario de hoy',
        'Manage your professional information': 'Gestiona tu informaciÃ³n profesional',
        'per session': 'por sesiÃ³n',
        'Edit Profile': 'Editar Perfil'
    },
    'fr': {
        'Dashboard': 'Tableau de Bord',
        'Profile': 'Profil',
        'My Patients': 'Mes Patients',
        'Schedule': 'Horaires',
        'Appointments': 'Rendez-vous',
        'Cancellation & Completion': 'Annulation et AchÃ¨vement',
        'Reviews': 'Avis',
        'Patient Messages': 'Messages des Patients',
        'Earnings': 'Revenus',
        'Settings': 'ParamÃ¨tres',
        'Logout': 'DÃ©connexion',
        'Search': 'Rechercher patients, rendez-vous...',
        'Consultations': 'Consultations',
        'Medical Records': 'Dossiers MÃ©dicaux',
        'Dashboard Overview': 'AperÃ§u du Tableau de Bord',
        'Accepted Appointments': 'Rendez-vous AcceptÃ©s',
        'Appointment History': 'Historique des Rendez-vous',
        'Practitioner Profile': 'Profil du Praticien',
        'Patient Reviews': 'Avis des Patients',
        'Total Patients': 'Total des Patients',
        'Registered patients': 'Patients enregistrÃ©s',
        'Messages': 'Messages',
        'Unread messages': 'Messages non lus',
        'Respond': 'RÃ©pondre',
        'Accepted': 'AcceptÃ©',
        'Confirmed appointments': 'Rendez-vous confirmÃ©s',
        'Pending': 'En attente',
        'Awaiting response': 'En attente de rÃ©ponse',
        'Today': 'Aujourd\'hui',
        'Today\'s schedule': 'Programme d\'aujourd\'hui',
        'Manage your professional information': 'GÃ©rez vos informations professionnelles',
        'per session': 'par session',
        'Edit Profile': 'Modifier le Profil'
    },
    'de': {
        'Dashboard': 'Dashboard',
        'Profile': 'Profil',
        'My Patients': 'Meine Patienten',
        'Schedule': 'ZeitplÃ¤ne',
        'Appointments': 'Termine',
        'Cancellation & Completion': 'Stornierung und Abschluss',
        'Reviews': 'Bewertungen',
        'Patient Messages': 'Patientennachrichten',
        'Earnings': 'Einnahmen',
        'Settings': 'Einstellungen',
        'Logout': 'Abmelden',
        'Search': 'Patienten, Termine suchen...',
        'Consultations': 'Beratungen',
        'Medical Records': 'Krankenakten',
        'Dashboard Overview': 'Dashboard-Ãœbersicht',
        'Accepted Appointments': 'Angenommene Termine',
        'Appointment History': 'Terminhistorie',
        'Practitioner Profile': 'Arztprofil',
        'Patient Reviews': 'Patientenbewertungen',
        'Total Patients': 'Gesamte Patienten',
        'Registered patients': 'Registrierte Patienten',
        'Messages': 'Nachrichten',
        'Unread messages': 'Ungelesene Nachrichten',
        'Respond': 'Antworten',
        'Accepted': 'Angenommen',
        'Confirmed appointments': 'BestÃ¤tigte Termine',
        'Pending': 'Ausstehend',
        'Awaiting response': 'Warten auf Antwort',
        'Today': 'Heute',
        'Today\'s schedule': 'Heutiger Zeitplan',
        'Manage your professional information': 'Verwalten Sie Ihre beruflichen Informationen',
        'per session': 'pro Sitzung',
        'Edit Profile': 'Profil Bearbeiten'
    },
    'zh': {
        'Dashboard': 'ä»ªè¡¨æ¿',
        'Profile': 'ä¸ªäººèµ„æ–™',
        'My Patients': 'æˆ‘çš„æ‚£è€…',
        'Schedule': 'æ—¶é—´å®‰æ’',
        'Appointments': 'é¢„çº¦',
        'Cancellation & Completion': 'å–æ¶ˆå’Œå®Œæˆ',
        'Reviews': 'è¯„è®º',
        'Patient Messages': 'æ‚£è€…æ¶ˆæ¯',
        'Earnings': 'æ”¶å…¥',
        'Settings': 'è®¾ç½®',
        'Logout': 'ç™»å‡º',
        'Search': 'æœç´¢æ‚£è€…ã€é¢„çº¦...',
        'Consultations': 'å’¨è¯¢',
        'Medical Records': 'åŒ»ç–—è®°å½•',
        'Dashboard Overview': 'ä»ªè¡¨æ¿æ¦‚è§ˆ',
        'Accepted Appointments': 'å·²æ¥å—çš„é¢„çº¦',
        'Appointment History': 'é¢„çº¦å†å²',
        'Practitioner Profile': 'åŒ»ç”Ÿæ¡£æ¡ˆ',
        'Patient Reviews': 'æ‚£è€…è¯„è®º',
        'Total Patients': 'æ‚£è€…æ€»æ•°',
        'Registered patients': 'æ³¨å†Œæ‚£è€…',
        'Messages': 'æ¶ˆæ¯',
        'Unread messages': 'æœªè¯»æ¶ˆæ¯',
        'Respond': 'å›å¤',
        'Accepted': 'å·²æ¥å—',
        'Confirmed appointments': 'å·²ç¡®è®¤é¢„çº¦',
        'Pending': 'å¾…å¤„ç†',
        'Awaiting response': 'ç­‰å¾…å›å¤',
        'Today': 'ä»Šå¤©',
        'Today\'s schedule': 'ä»Šæ—¥å®‰æ’',
        'Manage your professional information': 'ç®¡ç†æ‚¨çš„ä¸“ä¸šä¿¡æ¯',
        'per session': 'æ¯æ¬¡ä¼šè¯',
        'Edit Profile': 'ç¼–è¾‘æ¡£æ¡ˆ'
    }
};

// Language names
const practitionerLanguageNames = {
    'en': 'English',
    'ur': 'Ø§Ø±Ø¯Ùˆ',
    'ar': 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
    'hi': 'à¤¹à¤¿à¤¨à¥à¤¦à¥€',
    'es': 'EspaÃ±ol',
    'fr': 'FranÃ§ais',
    'de': 'Deutsch',
    'zh': 'ä¸­æ–‡'
};

// Initialize language system when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ¥ Initializing Practitioner Language System...');
    
    // Wait a bit for all elements to load
    setTimeout(function() {
        initializePractitionerLanguageSystem();
    }, 500);
});

function initializePractitionerLanguageSystem() {
    console.log('Setting up practitioner language system...');
    
    const langBtn = document.getElementById('practitionerLanguageBtn');
    const langDropdown = document.getElementById('practitionerLangDropdown');
    const langOptions = document.querySelectorAll('.practitioner-lang-option');
    const currentLangSpan = document.getElementById('practitionerCurrentLang');
    const chevron = document.getElementById('practitionerLangChevron');
    
    if (!langBtn || !langDropdown) {
        console.error('Language elements not found!');
        return;
    }
    
    console.log('Language elements found successfully');
    
    // Load saved language
    const savedLang = localStorage.getItem('practitionerLanguage') || 'en';
    const savedLangName = practitionerLanguageNames[savedLang] || 'English';
    
    if (currentLangSpan) {
        currentLangSpan.textContent = savedLangName;
    }
    
    // Apply saved language
    applyPractitionerLanguage(savedLang);
    
    // Add click event to language button
    langBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        console.log('Language button clicked!');
        
        const isHidden = langDropdown.style.display === 'none' || langDropdown.style.display === '';
        
        if (isHidden) {
            langDropdown.style.display = 'block';
            if (chevron) chevron.style.transform = 'rotate(180deg)';
            console.log('Dropdown opened');
        } else {
            langDropdown.style.display = 'none';
            if (chevron) chevron.style.transform = 'rotate(0deg)';
            console.log('Dropdown closed');
        }
    });
    
    // Add click events to language options
    langOptions.forEach(function(option) {
        option.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const langCode = this.getAttribute('data-lang');
            const langName = this.getAttribute('data-name');
            
            console.log('Language selected:', langCode, langName);
            
            // Update display
            if (currentLangSpan) {
                currentLangSpan.textContent = langName;
            }
            
            // Save preference
            localStorage.setItem('practitionerLanguage', langCode);
            localStorage.setItem('practitionerLanguageName', langName);
            
            // Apply language
            applyPractitionerLanguage(langCode);
            
            // Close dropdown
            langDropdown.style.display = 'none';
            if (chevron) chevron.style.transform = 'rotate(0deg)';
            
            // Show success message
            showPractitionerLanguageNotification(langName);
        });
    });
    
    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!langBtn.contains(e.target) && !langDropdown.contains(e.target)) {
            langDropdown.style.display = 'none';
            if (chevron) chevron.style.transform = 'rotate(0deg)';
        }
    });
    
    console.log('âœ… Practitioner language system initialized successfully!');
}

function applyPractitionerLanguage(langCode) {
    console.log('Applying practitioner language:', langCode);
    
    // Apply RTL for Arabic and Urdu
    const rtlLanguages = ['ar', 'ur'];
    const htmlElement = document.documentElement;
    
    if (rtlLanguages.includes(langCode)) {
        htmlElement.setAttribute('dir', 'rtl');
        htmlElement.setAttribute('lang', langCode);
        document.body.classList.add('rtl-layout');
    } else {
        htmlElement.setAttribute('dir', 'ltr');
        htmlElement.setAttribute('lang', langCode);
        document.body.classList.remove('rtl-layout');
    }
    
    // Translate content
    translatePractitionerContent(langCode);
}

function translatePractitionerContent(langCode) {
    const translations = practitionerTranslations[langCode] || practitionerTranslations['en'];
    let translatedCount = 0;
    
    // Translate all elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(function(element) {
        const key = element.getAttribute('data-translate');
        if (translations[key]) {
            if (element.tagName === 'INPUT' && (element.type === 'text' || element.type === 'search')) {
                element.placeholder = translations[key];
            } else {
                element.textContent = translations[key];
            }
            translatedCount++;
        }
    });
    
    console.log(`Translated ${translatedCount} elements to ${langCode}`);
}

function showPractitionerLanguageNotification(langName) {
    // Remove any existing notifications
    const existingNotification = document.querySelector('.practitioner-lang-notification');
    if (existingNotification) {
        existingNotification.remove();
    }
    
    // Create notification
    const notification = document.createElement('div');
    notification.className = 'practitioner-lang-notification fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-xl shadow-lg z-[10000] transform translate-x-full transition-transform duration-300';
    notification.innerHTML = `
        <div class="flex items-center space-x-3">
            <i class="fas fa-check-circle text-lg"></i>
            <span class="font-medium">Language changed to ${langName}</span>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    // Animate in
    setTimeout(() => {
        notification.style.transform = 'translateX(0)';
    }, 100);
    
    // Animate out and remove
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
            if (document.body.contains(notification)) {
                document.body.removeChild(notification);
            }
        }, 300);
    }, 3000);
}

console.log('âœ… Practitioner Language System Loaded!');

// Alert Bell for Pending Appointments
let pendingAppointmentsData = [];

// Toggle pending appointments dropdown
function togglePendingAppointments() {
    const dropdown = document.getElementById('pendingDropdown');
    
    if (dropdown.classList.contains('hidden')) {
        loadPendingAppointments();
        dropdown.classList.remove('hidden');
    } else {
        dropdown.classList.add('hidden');
    }
}

// Load pending appointments via AJAX
function loadPendingAppointments() {
    fetch('/practitioner-dashboard/api/pending-appointments/')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                pendingAppointmentsData = data.appointments;
                updatePendingAppointmentsList(data.appointments);
                updatePendingCount(data.appointments.length);
            } else {
                console.error('Error loading pending appointments:', data.error);
            }
        })
        .catch(error => {
            console.error('Error fetching pending appointments:', error);
        });
}

// Update pending appointments list in dropdown
function updatePendingAppointmentsList(appointments) {
    const listContainer = document.getElementById('pendingAppointmentsList');
    
    if (appointments.length === 0) {
        listContainer.innerHTML = `
            <div class="p-6 text-center">
                <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fas fa-check-circle text-gray-400 text-2xl"></i>
                </div>
                <p class="text-gray-500 text-sm">No pending appointments</p>
            </div>
        `;
        return;
    }
    
    let html = '';
    appointments.forEach(appointment => {
        html += `
            <div class="pending-appointment-item p-4 border-b border-gray-50 hover:bg-gray-50 transition-colors">
                <div class="flex items-start space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-doctor-orange to-orange-600 rounded-full flex items-center justify-center flex-shrink-0">
                        <span class="text-white font-semibold text-sm">${appointment.patient_initial}</span>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="font-medium text-doctor-dark-blue text-sm truncate">
                            ${appointment.patient_name}
                        </p>
                        <p class="text-xs text-gray-500 mb-1">${appointment.patient_email}</p>
                        <div class="flex items-center text-xs text-doctor-blue">
                            <i class="fas fa-calendar mr-1"></i>
                            <span>${appointment.date}</span>
                            <i class="fas fa-clock ml-2 mr-1"></i>
                            <span>${appointment.time}</span>
                        </div>
                        <div class="flex items-center justify-between mt-2">
                            <span class="px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs font-medium">
                                Pending
                            </span>
                            <div class="flex space-x-1">
                                <button onclick="quickAcceptAppointment(${appointment.id})" 
                                        class="quick-action-btn px-2 py-1 bg-green-100 text-green-600 rounded text-xs hover:bg-green-200 transition-colors"
                                        title="Accept Appointment">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button onclick="quickCancelAppointment(${appointment.id})" 
                                        class="quick-action-btn px-2 py-1 bg-red-100 text-red-600 rounded text-xs hover:bg-red-200 transition-colors"
                                        title="Cancel Appointment">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    });
    
    listContainer.innerHTML = html;
}

// Update pending count badge
function updatePendingCount(count) {
    const countElement = document.getElementById('pendingCount');
    const bellElement = document.getElementById('alertBell');
    const currentCount = parseInt(countElement.textContent) || 0;
    
    countElement.textContent = count;
    
    if (count > 0) {
        countElement.classList.remove('hidden');
        countElement.classList.add('notification-badge');
        
        // Ring bell if count increased
        if (count > currentCount) {
            bellElement.classList.add('alert-bell-active');
            setTimeout(() => {
                bellElement.classList.remove('alert-bell-active');
            }, 500);
        }
    } else {
        countElement.classList.add('hidden');
    }
}

// Quick accept appointment from alert bell
function quickAcceptAppointment(appointmentId) {
    if (confirm('Are you sure you want to accept this appointment?')) {
        fetch(`/practitioner-dashboard/appointments/${appointmentId}/Accepted/`)
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('Appointment accepted successfully!', 'success');
                    loadPendingAppointments(); // Refresh the list
                } else {
                    showNotification('Error accepting appointment', 'error');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('Error accepting appointment', 'error');
            });
    }
}

// Quick cancel appointment from alert bell
function quickCancelAppointment(appointmentId) {
    if (confirm('Are you sure you want to cancel this appointment?')) {
        fetch(`/practitioner-dashboard/appointments/${appointmentId}/Cancelled/`)
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('Appointment cancelled successfully!', 'success');
                    loadPendingAppointments(); // Refresh the list
                } else {
                    showNotification('Error cancelling appointment', 'error');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('Error cancelling appointment', 'error');
            });
    }
}

// Show notification message
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';
    
    notification.className = `fixed top-4 right-4 ${bgColor} text-white px-6 py-3 rounded-xl shadow-lg z-50 transform translate-x-full transition-transform duration-300`;
    notification.innerHTML = `
        <div class="flex items-center space-x-3">
            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'} text-lg"></i>
            <span class="font-medium">${message}</span>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    // Animate in
    setTimeout(() => {
        notification.style.transform = 'translateX(0)';
    }, 100);
    
    // Animate out and remove
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
            if (document.body.contains(notification)) {
                document.body.removeChild(notification);
            }
        }, 300);
    }, 3000);
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
    const alertBell = document.getElementById('alertBell');
    const pendingDropdown = document.getElementById('pendingDropdown');
    
    if (!alertBell.contains(event.target) && !pendingDropdown.contains(event.target)) {
        pendingDropdown.classList.add('hidden');
    }
});

// Load pending appointments on page load
document.addEventListener('DOMContentLoaded', function() {
    loadPendingAppointments();
    
    // Refresh pending appointments every 30 seconds
    setInterval(loadPendingAppointments, 30000);
});

// Mobile Sidebar Toggle Function
function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    
    if (sidebar.classList.contains('-translate-x-full')) {
        // Show sidebar
        sidebar.classList.remove('-translate-x-full');
        sidebar.classList.add('translate-x-0');
        overlay.classList.remove('hidden');
    } else {
        // Hide sidebar
        sidebar.classList.add('-translate-x-full');
        sidebar.classList.remove('translate-x-0');
        overlay.classList.add('hidden');
    }
}

// Close sidebar when clicking outside on mobile
document.addEventListener('click', function(event) {
    const sidebar = document.getElementById('sidebar');
    const mobileMenuBtn = document.querySelector('[onclick="toggleSidebar()"]');
    const overlay = document.getElementById('sidebar-overlay');
    
    // Check if click is outside sidebar and not on menu button
    if (window.innerWidth < 1024 && 
        !sidebar.contains(event.target) && 
        !mobileMenuBtn.contains(event.target) &&
        !sidebar.classList.contains('-translate-x-full')) {
        
        sidebar.classList.add('-translate-x-full');
        sidebar.classList.remove('translate-x-0');
        overlay.classList.add('hidden');
    }
});

// Handle window resize
window.addEventListener('resize', function() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    
    if (window.innerWidth >= 1024) {
        // Desktop view - ensure sidebar is visible and overlay is hidden
        sidebar.classList.remove('-translate-x-full');
        sidebar.classList.add('translate-x-0');
        overlay.classList.add('hidden');
    } else {
        // Mobile view - ensure sidebar is hidden by default
        sidebar.classList.add('-translate-x-full');
        sidebar.classList.remove('translate-x-0');
        overlay.classList.add('hidden');
    }
});
</script>

</body>

</html>